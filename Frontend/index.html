<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#06080f" />
    <meta name="description"
        content="Upload or record meetings, generate highlights, and chat with your meeting data." />
    <title>Meeting Intelligence System</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
    <script defer src="script.js"></script>
</head>

<body>

    <!-- LOADER -->
    <div id="loaderOverlay" class="loader-overlay hidden">
        <div class="loader-box">
            <div class="spinner"></div>
            <p id="loaderText">Processing...</p>
        </div>
    </div>

    <header class="topbar">
        <div>
            <p class="eyebrow">Meeting Intelligence System</p>
            <h1>Turn meetings into answers.</h1>
            <p class="subtitle">Upload or record meetings, generate highlights, and chat.</p>
        </div>
        <div class="status-pill" id="apiStatus">
            <span class="dot"></span>
            <span>API: Waiting</span>
        </div>
    </header>

    <!-- ACTIVE MEETING INFO BAR -->
    <div id="activeMeetingLabel" class="meeting-bar">
        <span class="empty-state" style="padding:4px 0;width:100%">No meeting selected</span>
    </div>

    <main class="layout">

        <!-- 1 Â· HISTORY -->
        <section class="card">
            <div class="card-header">
                <h2>ğŸ“‚ History</h2>
                <p>Select a meeting</p>
            </div>
            <div id="historyList" style="display:flex;flex-direction:column;gap:6px;">
                <div class="empty-state">Loading history...</div>
            </div>
        </section>

        <!-- 2 Â· RECORDING -->
        <section class="card">
            <div class="card-header">
                <h2>ğŸ™ï¸ Live Recording</h2>
                <p>Record meeting audio</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
                <button class="btn primary" onclick="startRecording()">ğŸ¤ Start</button>
                <button class="btn" onclick="stopRecording()">â¹ Stop</button>
                <span id="recStatus" class="status muted">Idle</span>
                <span id="recordTimer"
                    style="font-weight:700;color:#60a5fa;font-family:'Inter',monospace;font-size:.95rem;">00:00</span>
            </div>
        </section>

        <!-- 3 Â· HIGHLIGHTS -->
        <section class="card">
            <div class="card-header">
                <h2>âœ¨ Highlights</h2>
                <p>Generate meeting notes</p>
            </div>
            <div class="btn-row">
                <button class="btn primary" id="notesBtn" disabled>Generate</button>
                <div class="dropdown-wrap">
                    <button class="btn" id="downloadBtn" disabled>Download â–¾</button>
                    <div id="downloadModal" class="download-dropdown hidden">
                        <button class="dd-item" onclick="downloadFile('pdf')">ğŸ“„ PDF</button>
                        <button class="dd-item" onclick="downloadFile('txt')">ğŸ“ TXT</button>
                        <button class="dd-item" onclick="downloadFile('docx')">ğŸ“ƒ DOCX</button>
                    </div>
                </div>
            </div>
            <div id="notesOutput" class="notes-output">
                <div class="empty-state">Highlights will appear here.</div>
            </div>
        </section>

        <!-- 4 Â· UPLOAD -->
        <section class="card">
            <div class="card-header">
                <h2>ğŸ“¤ Upload Meeting</h2>
                <p>mp4 / mp3 / wav</p>
            </div>
            <div id="dropZone" class="dropzone">
                <input type="file" id="fileInput">
                <p>ğŸ“ Drop file here or click to browse</p>
            </div>
            <button id="uploadBtn" class="btn primary">Upload</button>
            <p id="uploadStatus" class="status muted">No file selected</p>
        </section>

        <!-- 5 Â· CHAT -->
        <section class="card chat-card">
            <div class="card-header">
                <h2>ğŸ’¬ Chat</h2>
                <p>Ask questions about your meeting</p>
            </div>
            <div id="chatMessages" class="chat-messages">
                <div class="message assistant">Upload or select a meeting to start chatting.</div>
            </div>
            <form id="chatForm" class="chat-input">
                <input id="chatInput" required disabled placeholder="Ask a question... (Enter to send)">
                <button id="sendBtn" disabled class="btn primary">Send</button>
            </form>
        </section>

    </main>

    <!-- NAME MODAL -->
    <div id="nameModal" class="loader-overlay hidden">
        <div class="loader-box" style="text-align:center">
            <h3>Enter Meeting Name</h3>
            <input id="meetingNameInput" placeholder="Example: Team Sync" style="margin-top:12px;">
            <div style="margin-top:15px">
                <button class="btn primary" onclick="submitMeetingName()" style="width:100%">Save</button>
            </div>
        </div>
    </div>

</body>

</html>